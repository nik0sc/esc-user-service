{
	"info": {
		"_postman_id": "fb685a18-9a1b-4d61-ab51-cd0d37eea366",
		"name": "ESC User microservice",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get Version",
			"request": {
				"method": "GET",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{baseUrl}}/version",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"version"
					]
				},
				"description": "Get the git commit hash for the current deployment of the service."
			},
			"response": []
		},
		{
			"name": "Create User",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"username\": \"dummy_user\",\n\t\"password\": \"Password1!\",\n\t\"long_name\": \"Dummy User\"\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/user",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user"
					]
				},
				"description": "Creating an existing user will fail!"
			},
			"response": []
		},
		{
			"name": "Login",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"name": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n\t\"username\": \"dummy_user\",\n\t\"password\": \"Password1!\"\n}"
				},
				"url": {
					"raw": "{{baseUrl}}/user/login",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"login"
					]
				}
			},
			"response": []
		},
		{
			"name": "Get Current User",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Parse-Session-Token",
						"value": "{{sessionToken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{baseUrl}}/user/me",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"me"
					]
				},
				"description": "Use the current session token to retrieve the current user profile."
			},
			"response": []
		},
		{
			"name": "Promote User to Admin",
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "0739daad-27d8-47f6-bd7c-ad30749033c1",
						"exec": [
							"pm.environment.set(\"userIdent\", \"nikos\");"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					},
					{
						"key": "X-Parse-Session-Token",
						"value": "{{sessionToken}}",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{baseUrl}}/user/{{userIdent}}/promoteToAdmin",
					"host": [
						"{{baseUrl}}"
					],
					"path": [
						"user",
						"{{userIdent}}",
						"promoteToAdmin"
					]
				},
				"description": "User holding the session token must be an admin. In other words, only an admin can promote other users to admin status.\nThe promotion is idempotent. userIdent can be either an all-digit string, in which case the ident is treated as an user id, or a mixed alnum/underscore string, in which case the ident is treated as a username."
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "6c1be67c-00cd-47ca-b3d6-d392c4cc770a",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "5bd2801d-a036-4a09-bf31-943cb164af54",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "eac371c5-4759-443d-801b-251dda9041d9",
			"key": "baseUrl",
			"value": "https://user-service.ticket.lepak.sg",
			"type": "string"
		}
	]
}